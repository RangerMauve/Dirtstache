<html>
	<head>
	<style>
		#content, div {
			margin:0;
			padding:0;
		}
		#content {width:616px}
		.in{
			width:49.5%;
			display:inline-block;
		}
		textarea {
			width:100%;
			height:200px;
		}
		.ou{
			width:100%;
			height:200px;
		}
	</style>
	<script src="../Dirtstache.js"></script>
	<script>
		function compute(){
			var tm = ""+document.getElementById("tm").value;
			var js = JSON.parse(document.getElementById("js").value);
			
			document.getElementById("cout").innerHTML = 
				Dirtstache.escape(Dirtstache.make(tm));
			document.getElementById("hout").innerHTML = 
				Dirtstache.escape(Dirtstache.compile("testT",tm)(js));
		}
		function helper(){
			var pr = document.getElementById("pr").value;
			Dirtstache.helper("test",eval("("+pr+")"));
		}
		function toggleVisible(id){
			var s= document.getElementById(id).style;
			s.display = (s.display == 'none') ? 'block' : 'none';
			return s.display;
		}
		onload = function(){
			helper();
		}
	</script>
	</head>
	<body>
		<div id="content">
			<div class="in">
				<div>Template:</div>
				<textarea id="tm">
<h1>Hello, {{name}}.</h1>
I really like <b>{#stuff}{{dicks}} and {{butts}}{/stuff}!</b>
Guess, what? I am a {:test food} eater!</textarea>
			</div>
			<div class="in">
				<div>JSON:</div>
				<textarea id="js">
{
  "name":"Bob Dole",
  "stuff":{
    "dicks":"Butts",
	"butts":"Dicks"
  },
  "food":"Pizza"
}</textarea>
			</div>
			<div class="in">
				<div>Helper Function: (Named "test") <button onclick="helper()">Register</button></div>
				<textarea id="pr">
function(arg){
  if(arg){
	return (""+this[arg]).toUpperCase();
  } else return "poop";
}</textarea>
			</div>
			<div>
				<div>Output:</div>
				<textarea id="cout" class="ou" readonly>Code will go here</textarea>
				<textarea id="hout" class="ou" readonly>Html will go here</textarea>
			</div>
			<div>
				<center>
					<button onclick="compute()">Render</button>
				</center>
			</div>
		</div>
	</body>
</html>